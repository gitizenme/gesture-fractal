<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
<title>Understanding the JavaScript Sample Application</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id$
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="understanding-the-javascript-sample-application">
<h1 class="title">Understanding the JavaScript Sample Application</h1>

<p>This article discusses the JavaScript sample application included with the Leap SDK. After reading this article, you should be ready to access Leap hand tracking data from your own Web applications.</p>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics:</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#javascript-client-library" id="id2">JavaScript Client Library</a></li>
<li><a class="reference internal" href="#connecting-to-the-leap-socket-server" id="id3">Connecting to the Leap Socket Server</a></li>
<li><a class="reference internal" href="#running-the-sample" id="id4">Running the sample</a></li>
</ul>
</div>
<p>In the Leap SDK folder, you can find the following file used for this article:</p>
<ul class="simple">
<li><tt class="docutils literal">Leap_SDK/samples/Sample.html</tt> — JavaScript sample application</li>
</ul>
<p>Also note that you can find the Leap API reference documentation at <a class="reference external" href="API_Reference/annotated.html">Leap_SDK/docs/API_Reference/annotated.html</a>.</p>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1">Overview</a></h1>
<p>In a nutshell, the Leap motion tracking device detects and tracks hands and fingers placed within its field of view. The Leap captures this data one <em>frame</em> at a time. Web applications can use the Leap application WebSocket server and the JavaScript API to access this data. The Leap sends tracking data through the socket connection as a JSON formated message.</p>
<p>The sample application demonstrates how to use a WebSocket to listen for frame messages dispatched by the Leap application through a local socket server. The application is a small HTML page that runs in any browser which supports WebSockets. The JavaScript in the page connects to the socket server and prints out each received JSON message. The application is contained in a single file, <tt class="docutils literal">Sample.html</tt>.</p>
<p>The JSON message contains the key tracking data objects in the Leap API, including:</p>
<ul class="simple">
<li><tt class="docutils literal">Frame</tt> — contains a set of hand and finger tracking data</li>
<li><tt class="docutils literal">Hand</tt> — contains tracking data for a detected hand</li>
<li><tt class="docutils literal">Finger</tt> — contains tracking data for a detected finger</li>
<li><tt class="docutils literal">Vector</tt> — represents a 3D position or directional vector</li>
</ul>
<p>For more detailed information about these classes, pleases refer to the Leap API reference documentation.</p>
</div>
<div class="section" id="javascript-client-library">
<h1><a class="toc-backref" href="#id2">JavaScript Client Library</a></h1>
<p>The JavaScript client library is not yet available. In this release, you can access the tracking data by parsing the JSON data into a JavaScript object. The JavaScript library under development will abstract the socket connection and JSON data and present an API similar to that available to the other programming environments supported by the Leap SDK.</p>
</div>
<div class="section" id="connecting-to-the-leap-socket-server">
<h1><a class="toc-backref" href="#id3">Connecting to the Leap Socket Server</a></h1>
<p>The Leap application listens for WebSocket connections on the localhost address at port 6437. Any application that supports the WebSocket protocol (<a class="reference external" href="http://tools.ietf.org/html/rfc6455">RFC6455</a>) can connect to the socket and receive a JSON message for each frame of tracking data.</p>
<p>The Sample.html file in the Leap SDK Samples folder uses JavaScript to connect to the Leap application socket server and display the received JSON messages.</p>
<p>To increase browser compatibility, the sample code detects which of two types of the WebSocket object is supported by the client browser:</p>
<pre class="javascript literal-block">
// Support both the WebSocket and MozWebSocket objects
if ((typeof(WebSocket) == 'undefined') &amp;&amp;
    (typeof(MozWebSocket) != 'undefined')) {
  WebSocket = MozWebSocket;
}
</pre>
<p>When the sample page loads, the <tt class="docutils literal">init()</tt> function initializes the socket:</p>
<pre class="javascript literal-block">
// Create the socket with event handlers
function init() {
  //Create and open the socket
  ws = new WebSocket(&quot;ws://localhost:6437/&quot;);
</pre>
<p>If the connection is successful, the <tt class="docutils literal">onopen</tt> event handler updates the page display:</p>
<pre class="javascript literal-block">
// On successful connection
ws.onopen = function(event) {
  document.getElementById(&quot;main&quot;).style.visibility = &quot;visible&quot;;
  document.getElementById(&quot;connection&quot;).innerHTML = &quot;WebSocket connection open!&quot;;
};
</pre>
<p>A frame of data is passed to the socket as a JSON message. The <tt class="docutils literal">onmessage</tt> handler parses the data into a JavaScript object and then prints it out to the page. (Using the JSON stringify() function provides a more readable display.):</p>
<pre class="javascript literal-block">
// On message received
ws.onmessage = function(event) {
  var obj = JSON.parse(event.data);
  var str = JSON.stringify(obj, undefined, 2);
  document.getElementById(&quot;output&quot;).innerHTML = '&lt;pre&gt;' + str + '&lt;/pre&gt;';

};
</pre>
<p>When the socket closes, the <tt class="docutils literal">onclose</tt> handler updates the page:</p>
<pre class="javascript literal-block">
// On socket close
ws.onclose = function(event) {
  ws = null;
  document.getElementById(&quot;main&quot;).style.visibility = &quot;hidden&quot;;
  document.getElementById(&quot;connection&quot;).innerHTML = &quot;WebSocket connection closed&quot;;
}
</pre>
</div>
<div class="section" id="running-the-sample">
<h1><a class="toc-backref" href="#id4">Running the sample</a></h1>
<p>To run the sample application:</p>
<ol class="arabic simple">
<li>Plug the Leap device into a USB port and place it in front of you.</li>
<li>If you haven’t already, install the Leap software.</li>
<li>Start the Leap application. If you haven’t already, enter your registered email address and password when prompted. The Leap icon appears in the notification area of the task bar (on Windows) or finder bar (on Mac) and turns green when ready.</li>
<li>Open <a class="reference external" href="../samples/Sample.html">Sample.html</a> in a browser that supports WebSockets.</li>
</ol>
<p>You should see the &quot;WebSocket connection open message&quot; at the top of the page. When you place a hand above the Leap, you should also see the frame information printed out in JSON notation.</p>
<p>Now that you have seen how to access motion tracking data from the Leap, you can begin developing your own JavaScript applications that integrate the Leap.</p>
<hr class="docutils" />
<p>Copyright © 2012-2013 Leap Motion, Inc. All rights reserved.</p>
<p>Leap Motion proprietary and confidential. Not for distribution. Use subject to the terms of the Leap Motion SDK Agreement available at <a class="reference external" href="https://developer.leapmotion.com/sdk_agreement">https://developer.leapmotion.com/sdk_agreement</a>, or another agreement between Leap Motion and you, your company or other organization.</p>
</div>
</div>
</body>
</html>
